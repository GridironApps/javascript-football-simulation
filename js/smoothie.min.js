class Smoothie{constructor(e={engine:PIXI,renderer:void 0,root:void 0,update:void 0,interpolate:!0,fps:60,renderFps:void 0,properties:{position:!0,rotation:!0,size:!1,scale:!1,alpha:!1,tile:!1}}){if(void 0===e.engine)throw new Error("Please assign a rendering engine as Smoothie's engine option");if(this.engine="",e.engine.ParticleContainer&&e.engine.Sprite&&(this.renderingEngine="pixi",this.Container=e.engine.Container,this.Sprite=e.engine.Sprite,this.MovieClip=e.engine.AnimatedSprite),void 0===e.renderer)throw new Error("Please assign a renderer object as Smoothie's renderer option");if(this.renderer=e.renderer,void 0===e.root)throw new Error("Please assign a root container object (the stage) as Smoothie's rootr option");if(this.stage=e.root,void 0===e.update)throw new Error("Please assign a function that you want to update on each frame as Smoothie's update option");this.update=e.update,void 0===e.properties?this.properties={position:!0,rotation:!0}:this.properties=e.properties,void 0!==e.fps?this._fps=e.fps:this._fps=void 0,void 0!==e.renderFps?this._renderFps=e.renderFps:this._renderFps=void 0,!1===e.interpolate?this.interpolate=!1:this.interpolate=!0,this.paused=!1,this._startTime=Date.now(),this._frameDuration=1e3/this._fps,this._lag=0,this._lagOffset=0,this._renderStartTime=0,void 0!==this._renderFps&&(this._renderDuration=1e3/this._renderFps)}get fps(){return this._fps}set fps(e){this._fps=e,this._frameDuration=1e3/this._fps}get renderFps(){return this._renderFps}set renderFps(e){this._renderFps=e,this._renderDuration=1e3/this._renderFps}get dt(){return this._lagOffset}pause(){this.paused=!0}resume(){this.paused=!1}start(){this.gameLoop()}gameLoop(e){if(requestAnimationFrame(this.gameLoop.bind(this)),!this.paused){let i=()=>{let e=Date.now(),i=e-this._startTime;for(i>1e3&&(i=this._frameDuration),this._startTime=e,this._lag+=i;this._lag>=this._frameDuration;)this.capturePreviousSpriteProperties(),this.update(),this._lag-=this._frameDuration;this._lagOffset=this._lag/this._frameDuration,this.render(this._lagOffset)};void 0===this._fps?(this.update(),this.render()):void 0===this._renderFps?i():e>=this._renderStartTime&&(i(),this._renderStartTime=e+this._renderDuration)}}capturePreviousSpriteProperties(){let e=i=>{if(this.properties.position&&(i._previousX=i.x,i._previousY=i.y),this.properties.rotation&&(i._previousRotation=i.rotation),this.properties.size&&(i._previousWidth=i.width,i._previousHeight=i.height),this.properties.scale&&(i._previousScaleX=i.scale.x,i._previousScaleY=i.scale.y),this.properties.alpha&&(i._previousAlpha=i.alpha),this.properties.tile&&(void 0!==i.tilePosition&&(i._previousTilePositionX=i.tilePosition.x,i._previousTilePositionY=i.tilePosition.y),void 0!==i.tileScale&&(i._previousTileScaleX=i.tileScale.x,i._previousTileScaleY=i.tileScale.y)),i.children&&i.children.length>0)for(let t=0;t<i.children.length;t++){let r=i.children[t];e(r)}};for(let i=0;i<this.stage.children.length;i++){let t=this.stage.children[i];e(t)}}render(e=1){if(this.interpolate){let i=t=>{if(this.properties.position&&(t._currentX=t.x,t._currentY=t.y,void 0!==t._previousX&&(t.x=(t.x-t._previousX)*e+t._previousX),void 0!==t._previousY&&(t.y=(t.y-t._previousY)*e+t._previousY)),this.properties.rotation&&(t._currentRotation=t.rotation,void 0!==t._previousRotation&&(t.rotation=(t.rotation-t._previousRotation)*e+t._previousRotation)),this.properties.size&&(t instanceof this.Sprite||t instanceof this.MovieClip)&&(t._currentWidth=t.width,t._currentHeight=t.height,void 0!==t._previousWidth&&(t.width=(t.width-t._previousWidth)*e+t._previousWidth),void 0!==t._previousHeight&&(t.height=(t.height-t._previousHeight)*e+t._previousHeight)),this.properties.scale&&(t._currentScaleX=t.scale.x,t._currentScaleY=t.scale.y,void 0!==t._previousScaleX&&(t.scale.x=(t.scale.x-t._previousScaleX)*e+t._previousScaleX),void 0!==t._previousScaleY&&(t.scale.y=(t.scale.y-t._previousScaleY)*e+t._previousScaleY)),this.properties.alpha&&(t._currentAlpha=t.alpha,void 0!==t._previousAlpha&&(t.alpha=(t.alpha-t._previousAlpha)*e+t._previousAlpha)),this.properties.tile&&(void 0!==t.tilePosition&&(t._currentTilePositionX=t.tilePosition.x,t._currentTilePositionY=t.tilePosition.y,void 0!==t._previousTilePositionX&&(t.tilePosition.x=(t.tilePosition.x-t._previousTilePositionX)*e+t._previousTilePositionX),void 0!==t._previousTilePositionY&&(t.tilePosition.y=(t.tilePosition.y-t._previousTilePositionY)*e+t._previousTilePositionY)),void 0!==t.tileScale&&(t._currentTileScaleX=t.tileScale.x,t._currentTileScaleY=t.tileScale.y,void 0!==t._previousTileScaleX&&(t.tileScale.x=(t.tileScale.x-t._previousTileScaleX)*e+t._previousTileScaleX),void 0!==t._previousTileScaleY&&(t.tileScale.y=(t.tileScale.y-t._previousTileScaleY)*e+t._previousTileScaleY))),0!==t.children.length)for(let e=0;e<t.children.length;e++){let r=t.children[e];i(r)}};for(let e=0;e<this.stage.children.length;e++){let t=this.stage.children[e];i(t)}}if(this.renderer.render(this.stage),this.interpolate){let e=i=>{if(this.properties.position&&(i.x=i._currentX,i.y=i._currentY),this.properties.rotation&&(i.rotation=i._currentRotation),this.properties.size&&(i instanceof this.Sprite||i instanceof this.MovieClip)&&(i.width=i._currentWidth,i.height=i._currentHeight),this.properties.scale&&(i.scale.x=i._currentScaleX,i.scale.y=i._currentScaleY),this.properties.alpha&&(i.alpha=i._currentAlpha),this.properties.tile&&(void 0!==i.tilePosition&&(i.tilePosition.x=i._currentTilePositionX,i.tilePosition.y=i._currentTilePositionY),void 0!==i.tileScale&&(i.tileScale.x=i._currentTileScaleX,i.tileScale.y=i._currentTileScaleY)),0!==i.children.length)for(let t=0;t<i.children.length;t++){let r=i.children[t];e(r)}};for(let i=0;i<this.stage.children.length;i++){let t=this.stage.children[i];e(t)}}}}